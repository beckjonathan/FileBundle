!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(g,f){var j=0,i=Array.prototype.slice,h=g.cleanData;g.cleanData=function(a){for(var k,l=0;null!=(k=a[l]);l++){try{g(k).triggerHandler("remove")}catch(e){}}h(a)},g.widget=function(r,q,p){var o,n,m,l,k={},a=r.split(".")[0];r=r.split(".")[1],o=a+"-"+r,p||(p=q,q=g.Widget),g.expr[":"][o.toLowerCase()]=function(c){return !!g.data(c,o)},g[a]=g[a]||{},n=g[a][r],m=g[a][r]=function(d,c){return this._createWidget?(arguments.length&&this._createWidget(d,c),void 0):new m(d,c)},g.extend(m,n,{version:p.version,_proto:g.extend({},p),_childConstructors:[]}),l=new q,l.options=g.widget.extend({},l.options),g.each(p,function(c,e){return g.isFunction(e)?(k[c]=function(){var b=function(){return q.prototype[c].apply(this,arguments)},d=function(s){return q.prototype[c].apply(this,s)};return function(){var t,s=this._super,u=this._superApply;return this._super=b,this._superApply=d,t=e.apply(this,arguments),this._super=s,this._superApply=u,t}}(),void 0):(k[c]=e,void 0)}),m.prototype=g.widget.extend(l,{widgetEventPrefix:n?l.widgetEventPrefix:r},k,{constructor:m,namespace:a,widgetName:r,widgetFullName:o}),n?(g.each(n._childConstructors,function(e,t){var s=t.prototype;g.widget(s.namespace+"."+s.widgetName,m,t._proto)}),delete n._childConstructors):q._childConstructors.push(m),g.widget.bridge(r,m)},g.widget.extend=function(m){for(var b,a,l=i.call(arguments,1),k=0,d=l.length;d>k;k++){for(b in l[k]){a=l[k][b],l[k].hasOwnProperty(b)&&a!==f&&(m[b]=g.isPlainObject(a)?g.isPlainObject(m[b])?g.widget.extend({},m[b],a):g.widget.extend({},a):a)}}return m},g.widget.bridge=function(d,b){var a=b.prototype.widgetFullName||d;g.fn[d]=function(l){var k="string"==typeof l,e=i.call(arguments,1),c=this;return l=!k&&e.length?g.widget.extend.apply(null,[l].concat(e)):l,k?this.each(function(){var n,m=g.data(this,a);return m?g.isFunction(m[l])&&"_"!==l.charAt(0)?(n=m[l].apply(m,e),n!==m&&n!==f?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):g.error("no such method '"+l+"' for "+d+" widget instance"):g.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+l+"'")}):this.each(function(){var m=g.data(this,a);m?m.option(l||{})._init():g.data(this,a,new b(l,this))}),c}},g.Widget=function(){},g.Widget._childConstructors=[],g.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,c){c=g(c||this.defaultElement||this)[0],this.element=g(c),this.uuid=j++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=g.widget.extend({},this.options,this._getCreateOptions(),a),this.bindings=g(),this.hoverable=g(),this.focusable=g(),c!==this&&(g.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===c&&this.destroy()}}),this.document=g(c.style?c.ownerDocument:c.document||c),this.window=g(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:g.noop,_getCreateEventData:g.noop,_create:g.noop,_init:g.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(g.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:g.noop,widget:function(){return this.element},option:function(n,m){var k,b,a,l=n;if(0===arguments.length){return g.widget.extend({},this.options)}if("string"==typeof n){if(l={},k=n.split("."),n=k.shift(),k.length){for(b=l[n]=g.widget.extend({},this.options[n]),a=0;a<k.length-1;a++){b[k[a]]=b[k[a]]||{},b=b[k[a]]}if(n=k.pop(),m===f){return b[n]===f?null:b[n]}b[n]=m}else{if(m===f){return this.options[n]===f?null:this.options[n]}l[n]=m}}return this._setOptions(l),this},_setOptions:function(d){var c;for(c in d){this._setOption(c,d[c])}return this},_setOption:function(d,c){return this.options[d]=c,"disabled"===d&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!c).attr("aria-disabled",c),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,n,m){var l,k=this;"boolean"!=typeof a&&(m=n,n=a,a=!1),m?(n=l=g(n),this.bindings=this.bindings.add(n)):(m=n,n=this.element,l=this.widget()),g.each(m,function(q,p){function o(){return a||k.options.disabled!==!0&&!g(this).hasClass("ui-state-disabled")?("string"==typeof p?k[p]:p).apply(k,arguments):void 0}"string"!=typeof p&&(o.guid=p.guid=p.guid||o.guid||g.guid++);var e=q.match(/^(\w+)\s*(.*)$/),c=e[1]+k.eventNamespace,b=e[2];b?l.delegate(b,c,o):n.bind(c,o)})},_off:function(d,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,d.unbind(c).undelegate(c)},_delay:function(k,e){function m(){return("string"==typeof k?l[k]:k).apply(l,arguments)}var l=this;return setTimeout(m,e||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a),this._on(a,{mouseenter:function(c){g(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){g(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a),this._on(a,{focusin:function(c){g(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){g(c.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,o,n){var m,l,k=this.options[a];if(n=n||{},o=g.Event(o),o.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),o.target=this.element[0],l=o.originalEvent){for(m in l){m in o||(o[m]=l[m])}}return this.element.trigger(o,n),!(g.isFunction(k)&&k.apply(this.element[0],[o].concat(n))===!1||o.isDefaultPrevented())}},g.each({show:"fadeIn",hide:"fadeOut"},function(a,d){g.Widget.prototype["_"+a]=function(m,l,k){"string"==typeof l&&(l={effect:l});var c,b=l?l===!0||"number"==typeof l?d:l.effect||d:a;l=l||{},"number"==typeof l&&(l={duration:l}),c=!g.isEmptyObject(l),l.complete=k,l.delay&&m.delay(l.delay),c&&g.effects&&g.effects.effect[b]?m[a](l):b!==a&&m[b]?m[b](l.duration,l.easing,k):m.queue(function(e){g(this)[a](),k&&k.call(m[0]),e()})}})});!function(a){var b=function(f,c){var d=/[^\w\-\.:]/.test(f)?new Function(b.arg+",tmpl","var _e=tmpl.encode"+b.helper+",_s='"+f.replace(b.regexp,b.func)+"';return _s;"):b.cache[f]=b.cache[f]||b(b.load(f));return c?d(c,b):function(g){return d(g,b)}};b.cache={},b.load=function(c){return document.getElementById(c).innerHTML},b.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,b.func=function(h,j,f,g,i,d){return j?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[j]||"\\"+j:f?"="===f?"'+_e("+g+")+'":"'+"+g+"+'":i?"';":d?"_s+='":void 0},b.encReg=/[<>&"'\x00]/g,b.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},b.encode=function(c){return String(c).replace(b.encReg,function(d){return b.encMap[d]||""})},b.arg="o",b.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return b}):a.tmpl=b}(this);(function(c){var b=function(h,f,d){var k,g,j=document.createElement("img");if(j.onerror=f,j.onload=function(){!g||d&&d.noRevoke||b.revokeObjectURL(g),f&&f(b.scale(j,d))},b.isInstanceOf("Blob",h)||b.isInstanceOf("File",h)){k=g=b.createObjectURL(h),j._type=h.type}else{if("string"!=typeof h){return !1}k=h,d&&d.crossOrigin&&(j.crossOrigin=d.crossOrigin)}return k?(j.src=k,j):b.readFile(h,function(l){var i=l.target;i&&i.result?j.src=i.result:f&&f(l)})},a=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.isInstanceOf=function(f,d){return Object.prototype.toString.call(d)==="[object "+f+"]"},b.transformCoordinates=function(){},b.getTransformedOptions=function(d){return d},b.renderImageToCanvas=function(m,u,k,q,h,f,g,v,p,j){return m.getContext("2d").drawImage(u,k,q,h,f,g,v,p,j),m},b.hasCanvasOption=function(d){return d.canvas||d.crop},b.scale=function(G,C){C=C||{};var K,z,w,y,t,H,B,I,q,E=document.createElement("canvas"),F=G.getContext||b.hasCanvasOption(C)&&E.getContext,D=G.naturalWidth||G.width,A=G.naturalHeight||G.height,x=D,j=A,J=function(){var d=Math.max((w||x)/x,(y||j)/j);d>1&&(x=Math.ceil(x*d),j=Math.ceil(j*d))},k=function(){var d=Math.min((K||x)/x,(z||j)/j);1>d&&(x=Math.ceil(x*d),j=Math.ceil(j*d))};return F&&(C=b.getTransformedOptions(C),B=C.left||0,I=C.top||0,C.sourceWidth?(t=C.sourceWidth,void 0!==C.right&&void 0===C.left&&(B=D-t-C.right)):t=D-B-(C.right||0),C.sourceHeight?(H=C.sourceHeight,void 0!==C.bottom&&void 0===C.top&&(I=A-H-C.bottom)):H=A-I-(C.bottom||0),x=t,j=H),K=C.maxWidth,z=C.maxHeight,w=C.minWidth,y=C.minHeight,F&&K&&z&&C.crop?(x=K,j=z,q=t/H-K/z,0>q?(H=z*t/K,void 0===C.top&&void 0===C.bottom&&(I=(A-H)/2)):q>0&&(t=K*H/z,void 0===C.left&&void 0===C.right&&(B=(D-t)/2))):((C.contain||C.cover)&&(w=K=K||w,y=z=z||y),C.cover?(k(),J()):(J(),k())),F?(E.width=x,E.height=j,b.transformCoordinates(E,C),b.renderImageToCanvas(E,G,B,I,t,H,0,0,x,j)):(G.width=x,G.height=j,G)},b.createObjectURL=function(d){return a?a.createObjectURL(d):!1},b.revokeObjectURL=function(d){return a?a.revokeObjectURL(d):!1},b.readFile=function(h,g,f){if(window.FileReader){var d=new FileReader;if(d.onload=d.onerror=g,f=f||"readAsDataURL",d[f]){return d[f](h),d}}return !1},"function"==typeof define&&define.amd?define(function(){return b}):c.loadImage=b})(this),function(a){"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(b){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var a=b.renderImageToCanvas;b.detectSubsampling=function(f){var d,c;return f.width*f.height>1048576?(d=document.createElement("canvas"),d.width=d.height=1,c=d.getContext("2d"),c.drawImage(f,-f.width+1,0),0===c.getImageData(0,0,1,1).data[3]):!1},b.detectVerticalSquash=function(k,q){var j,p,g,c,f,u=k.naturalHeight||k.height,m=document.createElement("canvas"),h=m.getContext("2d");for(q&&(u/=2),m.width=1,m.height=u,h.drawImage(k,0,0),j=h.getImageData(0,0,1,u).data,p=0,g=u,c=u;c>p;){f=j[4*(c-1)+3],0===f?g=c:p=c,c=g+p>>1}return c/u||1},b.renderImageToCanvas=function(B,I,y,t,x,q,F,A,G,k){if("image/jpeg"===I._type){var D,E,C,z,w=B.getContext("2d"),e=document.createElement("canvas"),H=1024,j=e.getContext("2d");if(e.width=H,e.height=H,w.save(),D=b.detectSubsampling(I),D&&(y/=2,t/=2,x/=2,q/=2),E=b.detectVerticalSquash(I,D),D||1!==E){for(t*=E,G=Math.ceil(H*G/x),k=Math.ceil(H*k/q/E),A=0,z=0;q>z;){for(F=0,C=0;x>C;){j.clearRect(0,0,H,H),j.drawImage(I,y,t,x,q,-C,-z,x,q),w.drawImage(e,0,0,H,H,F,A,G,k),C+=H,F+=G}z+=H,A+=k}return w.restore(),B}}return a(B,I,y,t,x,q,F,A,G,k)}}}),function(a){"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(b){var a=b.hasCanvasOption;b.hasCanvasOption=function(c){return a(c)||c.orientation},b.transformCoordinates=function(h,f){var d=h.getContext("2d"),c=h.width,j=h.height,g=f.orientation;if(g){switch(g>4&&(h.width=j,h.height=c),g){case 2:d.translate(c,0),d.scale(-1,1);break;case 3:d.translate(c,j),d.rotate(Math.PI);break;case 4:d.translate(0,j),d.scale(1,-1);break;case 5:d.rotate(0.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(0.5*Math.PI),d.translate(0,-j);break;case 7:d.rotate(0.5*Math.PI),d.translate(c,-j),d.scale(-1,1);break;case 8:d.rotate(-0.5*Math.PI),d.translate(-c,0)}}},b.getTransformedOptions=function(f){if(!f.orientation||1===f.orientation){return f}var d,c={};for(d in f){f.hasOwnProperty(d)&&(c[d]=f[d])}switch(f.orientation){case 2:c.left=f.right,c.right=f.left;break;case 3:c.left=f.right,c.top=f.bottom,c.right=f.left,c.bottom=f.top;break;case 4:c.top=f.bottom,c.bottom=f.top;break;case 5:c.left=f.top,c.top=f.left,c.right=f.bottom,c.bottom=f.right;break;case 6:c.left=f.top,c.top=f.right,c.right=f.bottom,c.bottom=f.left;break;case 7:c.left=f.bottom,c.top=f.right,c.right=f.top,c.bottom=f.left;break;case 8:c.left=f.bottom,c.top=f.left,c.right=f.top,c.bottom=f.right}return f.orientation>4&&(c.maxWidth=f.maxHeight,c.maxHeight=f.maxWidth,c.minWidth=f.minHeight,c.minHeight=f.minWidth,c.sourceWidth=f.sourceHeight,c.sourceHeight=f.sourceWidth),c}}),function(a){"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(b){var a=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);b.blobSlice=a&&function(){var c=this.slice||this.webkitSlice||this.mozSlice;return c.apply(this,arguments)},b.metaDataParsers={jpeg:{65505:[]}},b.parseMetaData=function(e,d,c){c=c||{};var j=this,g=c.maxMetaDataSize||262144,h={},f=!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&b.blobSlice);(f||!b.readFile(b.blobSlice.call(e,0,g),function(w){var i,x,p,k,q=w.target.result,v=new DataView(q),n=2,o=v.byteLength-4,m=n;if(65496===v.getUint16(0)){for(;o>n&&(i=v.getUint16(n),i>=65504&&65519>=i||65534===i);){if(x=v.getUint16(n+2)+2,n+x>v.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(p=b.metaDataParsers.jpeg[i]){for(k=0;p.length>k;k+=1){p[k].call(j,v,n,x,h,c)}}n+=x,m=n}!c.disableImageHead&&m>6&&(h.imageHead=q.slice?q.slice(0,m):new Uint8Array(q).subarray(0,m))}else{console.log("Invalid JPEG file: Missing JPEG marker.")}d(h)},"readAsArrayBuffer"))&&d(h)}}),function(a){"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],a):a(window.loadImage)}(function(a){a.ExifMap=function(){return this},a.ExifMap.prototype.map={Orientation:274},a.ExifMap.prototype.get=function(b){return this[b]||this[this.map[b]]},a.getExifThumbnail=function(g,d,c){var b,h,f;if(!c||d+c>g.byteLength){return console.log("Invalid Exif data: Invalid thumbnail data."),void 0}for(b=[],h=0;c>h;h+=1){f=g.getUint8(d+h),b.push((16>f?"0":"")+f.toString(16))}return"data:image/jpeg,%"+b.join("%")},a.exifTagTypes={1:{getValue:function(c,b){return c.getUint8(b)},size:1},2:{getValue:function(c,b){return String.fromCharCode(c.getUint8(b))},size:1,ascii:!0},3:{getValue:function(d,c,b){return d.getUint16(c,b)},size:2},4:{getValue:function(d,c,b){return d.getUint32(c,b)},size:4},5:{getValue:function(d,c,b){return d.getUint32(c,b)/d.getUint32(c+4,b)},size:8},9:{getValue:function(d,c,b){return d.getInt32(c,b)},size:4},10:{getValue:function(d,c,b){return d.getInt32(c,b)/d.getInt32(c+4,b)},size:8}},a.exifTagTypes[7]=a.exifTagTypes[1],a.getExifValue=function(y,k,w,h,b,e){var z,q,j,v,x,m,p=a.exifTagTypes[h];if(!p){return console.log("Invalid Exif data: Invalid tag type."),void 0}if(z=p.size*b,q=z>4?k+y.getUint32(w+8,e):w+8,q+z>y.byteLength){return console.log("Invalid Exif data: Invalid data offset."),void 0}if(1===b){return p.getValue(y,q,e)}for(j=[],v=0;b>v;v+=1){j[v]=p.getValue(y,q+v*p.size,e)}if(p.ascii){for(x="",v=0;j.length>v&&(m=j[v],"\0"!==m);v+=1){x+=m}return x}return j},a.parseExifTag=function(d,c,b,g,e){var f=d.getUint16(b,g);e.exif[f]=a.getExifValue(d,c,b,d.getUint16(b+2,g),d.getUint32(b+4,g),g)},a.parseExifTags=function(h,d,c,b,k){var g,j,f;if(c+6>h.byteLength){return console.log("Invalid Exif data: Invalid directory offset."),void 0}if(g=h.getUint16(c,b),j=c+2+12*g,j+4>h.byteLength){return console.log("Invalid Exif data: Invalid directory size."),void 0}for(f=0;g>f;f+=1){this.parseExifTag(h,d,c+2+12*f,b,k)}return h.getUint32(j,b)},a.parseExifData=function(k,g,j,e,b){if(!b.disableExif){var c,m,h,f=g+10;if(1165519206===k.getUint32(g+4)){if(f+8>k.byteLength){return console.log("Invalid Exif data: Invalid segment size."),void 0}if(0!==k.getUint16(g+8)){return console.log("Invalid Exif data: Missing byte alignment offset."),void 0}switch(k.getUint16(f)){case 18761:c=!0;break;case 19789:c=!1;break;default:return console.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==k.getUint16(f+2,c)){return console.log("Invalid Exif data: Missing TIFF marker."),void 0}m=k.getUint32(f+4,c),e.exif=new a.ExifMap,m=a.parseExifTags(k,f,f+m,c,e),m&&!b.disableExifThumbnail&&(h={exif:{}},m=a.parseExifTags(k,f,f+m,c,h),h.exif[513]&&(e.exif.Thumbnail=a.getExifThumbnail(k,f+h.exif[513],h.exif[514]))),e.exif[34665]&&!b.disableExifSub&&a.parseExifTags(k,f,f+e.exif[34665],c,e),e.exif[34853]&&!b.disableExifGps&&a.parseExifTags(k,f,f+e.exif[34853],c,e)}}},a.metaDataParsers.jpeg[65505].push(a.parseExifData)}),function(a){"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],a):a(window.loadImage)}(function(f){var d,c,b;f.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},f.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},f.ExifMap.prototype.getText=function(g){var a=this.get(g);switch(g){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[g][a];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(a[0],a[1],a[2],a[3]);case"ComponentsConfiguration":return this.stringValues[g][a[0]]+this.stringValues[g][a[1]]+this.stringValues[g][a[2]]+this.stringValues[g][a[3]];case"GPSVersionID":return a[0]+"."+a[1]+"."+a[2]+"."+a[3]}return a+""},d=f.ExifMap.prototype.tags,c=f.ExifMap.prototype.map;for(b in d){d.hasOwnProperty(b)&&(c[d[b]]=b)}f.ExifMap.prototype.getAll=function(){var j,h,g={};for(j in this){this.hasOwnProperty(j)&&(h=d[j],h&&(g[h]=this.getText(h)))}return g}});!function(b){var d=b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype,g=b.Blob&&function(){try{return Boolean(new Blob)}catch(e){return !1}}(),f=g&&b.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return !1}}(),c=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder,a=(g||c)&&b.atob&&b.ArrayBuffer&&b.Uint8Array&&function(n){var o,m,j,h,k,p;for(o=n.split(",")[0].indexOf("base64")>=0?atob(n.split(",")[1]):decodeURIComponent(n.split(",")[1]),m=new ArrayBuffer(o.length),j=new Uint8Array(m),h=0;h<o.length;h+=1){j[h]=o.charCodeAt(h)}return k=n.split(",")[0].split(":")[1].split(";")[0],g?new Blob([f?j:m],{type:k}):(p=new c,p.append(m),p.getBlob(k))};b.HTMLCanvasElement&&!d.toBlob&&(d.mozGetAsFile?d.toBlob=function(e,i,h){h&&d.toDataURL&&a?e(a(this.toDataURL(i,h))):e(this.mozGetAsFile("blob",i))}:d.toDataURL&&a&&(d.toBlob=function(h,i,j){h(a(this.toDataURL(i,j)))})),"function"==typeof define&&define.amd?define(function(){return a}):b.dataURLtoBlob=a}(this);!function(a){"function"==typeof define&&define.amd?define(["./blueimp-helper"],a):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=a(window.blueimp.helper||window.jQuery))}(function(a){function b(d,c){return d&&d.length&&void 0!==document.body.style.maxHeight?this&&this.options===b.prototype.options?(this.list=d,this.num=d.length,this.initOptions(c),this.initialize(),void 0):new b(d,c):!1}return a.extend(b.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5000,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},support:function(d){var g,c,f,j={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},h={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(g in h){if(h.hasOwnProperty(g)&&void 0!==d.style[g]){c=h[g],c.name=g,j.transition=c;break}}return document.body.appendChild(d),c&&(g=c.name.slice(0,-9)+"ransform",void 0!==d.style[g]&&(d.style[g]="translateZ(0)",f=window.getComputedStyle(d).getPropertyValue(c.prefix+"transform"),j.transform={prefix:c.prefix,name:g,translate:!0,translateZ:f&&"none"!==f})),void 0!==d.style.backgroundSize&&(d.style.backgroundSize="contain",j.backgroundSize={contain:"contain"===window.getComputedStyle(d).getPropertyValue("background-size")}),document.body.removeChild(d),j}(document.createElement("div")),initialize:function(){return this.initStartIndex(),this.initWidget()===!1?!1:(this.initEventListeners(),this.options.onopen&&this.options.onopen.call(this),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play(),void 0)},slide:function(d,g){window.clearTimeout(this.timeout);var c,f,j,h=this.index;if(h!==d&&1!==this.num){if(g||(g=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(d=this.circle(d)),c=Math.abs(h-d)/(h-d),this.options.continuous&&(f=c,c=-this.positions[this.circle(d)]/this.slideWidth,c!==f&&(d=-c*this.num+d)),j=Math.abs(h-d)-1;j;){j-=1,this.move(this.circle((d>h?d:h)-j-1),this.slideWidth*c,0)}d=this.circle(d),this.move(h,this.slideWidth*c,g),this.move(d,0,g),this.options.continuous&&this.move(this.circle(d-c),-(this.slideWidth*c),0)}else{d=this.circle(d),this.animate(h*-this.slideWidth,d*-this.slideWidth,g)}this.onslide(d)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(c){window.clearTimeout(this.timeout),this.interval=c||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(this.slide,[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(c){var d;for(this.list=this.list.concat(c),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),d=this.num-c.length;d<this.num;d+=1){this.addSlide(d),this.positionSlide(d)}this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.slides=[]},close:function(){var c=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(c.displayClass).removeClass(c.singleClass).removeClass(c.leftEdgeClass).removeClass(c.rightEdgeClass),c.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclose&&this.options.onclose.call(this)},circle:function(c){return(this.num+c%this.num)%this.num},move:function(d,f,c){this.translateX(d,f,c),this.positions[d]=f},translate:function(f,h,d,g){var k=this.slides[f].style,j=this.support.transition,c=this.support.transform;k[j.name+"Duration"]=g+"ms",k[c.name]="translate("+h+"px, "+d+"px)"+(c.translateZ?" translateZ(0)":"")},translateX:function(d,f,c){this.translate(d,f,0,c)},translateY:function(d,f,c){this.translate(d,0,f,c)},animate:function(d,g,c){if(!c){return this.slidesContainer[0].style.left=g+"px",void 0}var f=this,j=(new Date).getTime(),h=window.setInterval(function(){var e=(new Date).getTime()-j;return e>c?(f.slidesContainer[0].style.left=g+"px",f.ontransitionend(),window.clearInterval(h),void 0):(f.slidesContainer[0].style.left=(g-d)*(Math.floor(100*(e/c))/100)+d+"px",void 0)},4)},preventDefault:function(c){c.preventDefault?c.preventDefault():c.returnValue=!1},onresize:function(){this.initSlides(!0)},onmousedown:function(c){c.which&&1===c.which&&(c.preventDefault(),(c.originalEvent||c).touches=[{pageX:c.pageX,pageY:c.pageY}],this.ontouchstart(c))},onmousemove:function(c){this.touchStart&&((c.originalEvent||c).touches=[{pageX:c.pageX,pageY:c.pageY}],this.ontouchmove(c))},onmouseup:function(c){this.touchStart&&(this.ontouchend(c),delete this.touchStart)},onmouseout:function(f){if(this.touchStart){var c=f.target,d=f.relatedTarget;(!d||d!==c&&!a.contains(c,d))&&this.onmouseup(f)}},ontouchstart:function(c){var d=(c.originalEvent||c).touches[0];this.touchStart={x:d.pageX,y:d.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(d){var g,c,f=(d.originalEvent||d).touches[0],j=(d.originalEvent||d).scale,h=this.index;if(!(f.length>1||j&&1!==j)){if(this.options.disableScroll&&d.preventDefault(),this.touchDelta={x:f.pageX-this.touchStart.x,y:f.pageY-this.touchStart.y},g=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(g)<Math.abs(this.touchDelta.y)),this.isScrolling){this.options.closeOnSwipeUpOrDown&&this.translateY(h,this.touchDelta.y+this.positions[h],0)}else{for(d.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?c=[this.circle(h+1),h,this.circle(h-1)]:(this.touchDelta.x=g/=!h&&g>0||h===this.num-1&&0>g?Math.abs(g)/this.slideWidth+1:1,c=[h],h&&c.push(h-1),h<this.num-1&&c.unshift(h+1));c.length;){h=c.pop(),this.translateX(h,g+this.positions[h],0)}}}},ontouchend:function(){var x,q,m,y,j,g=this.index,k=this.options.transitionSpeed,f=this.slideWidth,w=Number(Date.now()-this.touchStart.time)<250,p=w&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>f/2,u=!g&&this.touchDelta.x>0||g===this.num-1&&this.touchDelta.x<0,v=!p&&this.options.closeOnSwipeUpOrDown&&(w&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(u=!1),x=this.touchDelta.x<0?-1:1,this.isScrolling?v?this.close():this.translateY(g,0,k):p&&!u?(q=g+x,m=g-x,y=f*x,j=-f*x,this.options.continuous?(this.move(this.circle(q),y,0),this.move(this.circle(g-2*x),j,0)):q>=0&&q<this.num&&this.move(q,y,0),this.move(g,this.positions[g]+y,k),this.move(this.circle(m),this.positions[this.circle(m)]+y,k),g=this.circle(m),this.onslide(g)):this.options.continuous?(this.move(this.circle(g-1),-f,k),this.move(g,0,k),this.move(this.circle(g+1),f,k)):(g&&this.move(g-1,-f,k),this.move(g,0,k),g<this.num-1&&this.move(g+1,f,k))},ontransitionend:function(c){var d=this.slides[this.index];c&&d!==c.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,d]))},oncomplete:function(f){var c,d=f.target||f.srcElement,g=d&&d.parentNode;d&&g&&(c=this.getNodeIndex(g),a(g).removeClass(this.options.slideLoadingClass),"error"===f.type?(a(g).addClass(this.options.slideErrorClass),this.elements[c]=3):this.elements[c]=2,d.clientHeight>this.container[0].clientHeight&&(d.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===g&&this.play(),this.setTimeout(this.options.onslidecomplete,[c,g]))},onload:function(c){this.oncomplete(c)},onerror:function(c){this.oncomplete(c)},onkeydown:function(c){switch(c.which||c.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(c),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(c),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(c),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(c),this.next())}},handleClick:function(f){var c=this.options,d=f.target||f.srcElement,h=d.parentNode,g=function(i){return a(d).hasClass(i)||a(h).hasClass(i)};h===this.slidesContainer[0]?(this.preventDefault(f),c.closeOnSlideClick?this.close():this.toggleControls()):h.parentNode&&h.parentNode===this.slidesContainer[0]?(this.preventDefault(f),this.toggleControls()):g(c.toggleClass)?(this.preventDefault(f),this.toggleControls()):g(c.prevClass)?(this.preventDefault(f),this.prev()):g(c.nextClass)?(this.preventDefault(f),this.next()):g(c.closeClass)?(this.preventDefault(f),this.close()):g(c.playPauseClass)&&(this.preventDefault(f),this.toggleSlideshow())},onclick:function(c){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?(delete this.touchDelta,void 0):this.handleClick(c)},updateEdgeClasses:function(c){c?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),c===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(c){this.options.continuous||this.updateEdgeClasses(c),this.loadElements(c),this.options.unloadElements&&this.unloadElements(c),this.setTitle(c)},onslide:function(c){this.index=c,this.handleSlide(c),this.setTimeout(this.options.onslide,[c,this.slides[c]])},setTitle:function(d){var f=this.slides[d].firstChild.title,c=this.titleElement;c.length&&(this.titleElement.empty(),f&&c[0].appendChild(document.createTextNode(f)))},setTimeout:function(d,g,c){var f=this;return d&&window.setTimeout(function(){d.apply(f,g||[])},c||0)},imageFactory:function(p,k){var u,g,f,j=this,c=this.imagePrototype.cloneNode(!1),t=p,m=this.options.stretchImages&&this.support.backgroundSize&&this.support.backgroundSize.contain,q=function(d){if(!u){if(d={type:d.type,target:g},!g.parentNode){return j.setTimeout(q,[d])}u=!0,a(c).off("load error",q),m&&"load"===d.type&&(g.style.background='url("'+t+'") center no-repeat',g.style.backgroundSize="contain"),k(d)}};return"string"!=typeof t&&(t=this.getItemProperty(p,this.options.urlProperty),f=this.getItemProperty(p,this.options.titleProperty)),m?g=this.elementPrototype.cloneNode(!1):(g=c,c.draggable=!1),f&&(g.title=f),a(c).on("load error",q),c.src=t,g},createElement:function(f,c){var d=f&&this.getItemProperty(f,this.options.typeProperty),h=d&&this[d.split("/")[0]+"Factory"]||this.imageFactory,g=f&&h.call(this,f,c);return g||(g=this.elementPrototype.cloneNode(!1),this.setTimeout(c,[{type:"error",target:g}])),a(g).addClass(this.options.slideContentClass),g},loadElement:function(c){this.elements[c]||(this.slides[c].firstChild?this.elements[c]=a(this.slides[c]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[c]=1,a(this.slides[c]).addClass(this.options.slideLoadingClass),this.slides[c].appendChild(this.createElement(this.list[c],this.proxyListener))))},loadElements:function(d){var g,c=Math.min(this.num,2*this.options.preloadRange+1),f=d;for(g=0;c>g;g+=1){f+=g*(0===g%2?-1:1),f=this.circle(f),this.loadElement(f)}},unloadElements:function(d){var g,c,f;for(g in this.elements){this.elements.hasOwnProperty(g)&&(f=Math.abs(d-g),f>this.options.preloadRange&&f+this.options.preloadRange<this.num&&(c=this.slides[g],c.removeChild(c.firstChild),delete this.elements[g]))}},addSlide:function(c){var d=this.slidePrototype.cloneNode(!1);d.setAttribute("data-index",c),this.slidesContainer[0].appendChild(d),this.slides.push(d)},positionSlide:function(c){var d=this.slides[c];d.style.width=this.slideWidth+"px",this.support.transition&&(d.style.left=c*-this.slideWidth+"px",this.move(c,this.index>c?-this.slideWidth:this.index<c?this.slideWidth:0,0))},initSlides:function(f){var c,d;for(f||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),a(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,c=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",c&&this.resetSlides(),d=0;d<this.num;d+=1){c&&this.addSlide(d),this.positionSlide(d)}this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},toggleControls:function(){var c=this.options.controlsClass;this.container.hasClass(c)?this.container.removeClass(c):this.container.addClass(c)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(c){return parseInt(c.getAttribute("data-index"),10)},getNestedProperty:function(c,d){return d.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(j,g,h,m,k){var f=k||g||h||m&&parseInt(m,10);j&&c&&(c=c[f])}),c},getItemProperty:function(c,d){return c[d]||c.getAttribute&&c.getAttribute("data-"+d)||this.getNestedProperty(c,d)},initStartIndex:function(){var d,f=this.options.index,c=this.options.urlProperty;if(f&&"number"!=typeof f){for(d=0;d<this.num;d+=1){if(this.list[d]===f||this.getItemProperty(this.list[d],c)===this.getItemProperty(f,c)){f=d;break}}}this.index=this.circle(parseInt(f,10)||0)},initEventListeners:function(){var f=this,c=this.slidesContainer,d=function(g){var e=f.support.transition&&f.support.transition.end===g.type?"transitionend":g.type;f["on"+e](g)};a(window).on("resize",d),a(document.body).on("keydown",d),this.container.on("click",d),this.support.touch?c.on("touchstart touchmove touchend",d):this.options.emulateTouchEvents&&this.support.transition&&c.on("mousedown mousemove mouseup mouseout",d),this.support.transition&&c.on(this.support.transition.end,d),this.proxyListener=d},destroyEventListeners:function(){var d=this.slidesContainer,c=this.proxyListener;a(window).off("resize",c),a(document.body).off("keydown",c),this.container.off("click",c),this.support.touch?d.off("touchstart touchmove touchend",c):this.options.emulateTouchEvents&&this.support.transition&&d.off("mousedown mousemove mouseup mouseout",c),this.support.transition&&d.off(this.support.transition.end,c)},initWidget:function(){return this.container=a(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),1===this.num&&this.container.addClass(this.options.singleClass),this.container[0].style.display="block",this.initSlides(),this.container.addClass(this.options.displayClass),void 0):!1):!1},initOptions:function(c){this.options=a.extend({},this.options),(c&&c.carousel||this.options.carousel&&(!c||c.carousel!==!1))&&a.extend(this.options,this.carouselOptions),a.extend(this.options,c),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),b}),function(a){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],a):a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(b,d){b.extend(d.prototype.options,{fullScreen:!1});var a=d.prototype.initialize,c=d.prototype.close;return b.extend(d.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},requestFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},initialize:function(){a.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),c.call(this)}}),d}),function(a){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],a):a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(c,g){c.extend(g.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var b=g.prototype.initSlides,d=g.prototype.addSlide,j=g.prototype.resetSlides,h=g.prototype.handleClick,a=g.prototype.handleSlide,f=g.prototype.close;return c.extend(g.prototype,{createIndicator:function(q){var m,p,t=this.indicatorPrototype.cloneNode(!1),r=this.getItemProperty(q,this.options.titleProperty),k=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(p=q.getElementsByTagName&&c(q).find("img")[0],p?m=p.src:k&&(m=this.getItemProperty(q,k)),m&&(t.style.backgroundImage='url("'+m+'")')),r&&(t.title=r),t},addIndicator:function(i){if(this.indicatorContainer.length){var k=this.createIndicator(this.list[i]);k.setAttribute("data-index",i),this.indicatorContainer[0].appendChild(k),this.indicators.push(k)}},setActiveIndicator:function(i){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=c(this.indicators[i]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(e){e||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),b.call(this,e)},addSlide:function(e){d.call(this,e),this.addIndicator(e)},resetSlides:function(){j.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(l){var m=l.target||l.srcElement,k=m.parentNode;if(k===this.indicatorContainer[0]){this.preventDefault(l),this.slide(this.getNodeIndex(m))}else{if(k.parentNode!==this.indicatorContainer[0]){return h.call(this,l)}this.preventDefault(l),this.slide(this.getNodeIndex(k))}},handleSlide:function(e){a.call(this,e),this.setActiveIndicator(e)},close:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),f.call(this)}}),g}),function(a){"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],a):a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(a,b){return a.extend(b.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"}),b.prototype.videoFactory=function(H,D){var t,A,z,C,w,K=this,E=this.options,I=this.elementPrototype.cloneNode(!1),J=a(I),q=[{type:"error",target:I}],x=document.createElement("video"),B=this.getItemProperty(H,E.urlProperty),F=this.getItemProperty(H,E.typeProperty),G=this.getItemProperty(H,E.titleProperty),j=this.getItemProperty(H,E.videoPosterProperty),k=this.getItemProperty(H,E.videoSourcesProperty);if(J.addClass(E.videoContentClass),G&&(I.title=G),x.canPlayType){if(B&&F&&x.canPlayType(F)){x.src=B}else{if(k){for("string"==typeof k&&(k=a.parseJSON(k));k&&k.length;){if(A=k.shift(),B=this.getItemProperty(A,E.urlProperty),F=this.getItemProperty(A,E.typeProperty),B&&F&&x.canPlayType(F)){x.src=B;break}}}}}return j&&(x.setAttribute("poster",j),t=this.imagePrototype.cloneNode(!1),a(t).addClass(E.toggleClass),t.src=j,t.draggable=!1,I.appendChild(t)),z=document.createElement("a"),z.setAttribute("target","_blank"),z.setAttribute("download",G),z.href=B,x.src&&(x.controls=!0,a(x).on("error",function(){K.setTimeout(D,q)}).on("pause",function(){C=!1,J.removeClass(K.options.videoLoadingClass).removeClass(K.options.videoPlayingClass),w&&K.container.addClass(K.options.controlsClass),K.interval&&K.play()}).on("playing",function(){C=!1,J.removeClass(K.options.videoLoadingClass).addClass(K.options.videoPlayingClass),K.container.hasClass(K.options.controlsClass)?(w=!0,K.container.removeClass(K.options.controlsClass)):w=!1}).on("play",function(){window.clearTimeout(K.timeout),C=!0,J.addClass(K.options.videoLoadingClass)}),a(z).on("click",function(c){c.preventDefault(),C?x.pause():x.play()}),I.appendChild(x)),I.appendChild(z),this.setTimeout(D,[{type:"load",target:I}]),I},b}),function(a){"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery.js"],a):a(window.jQuery,window.blueimp.Gallery)}(function(a,b){a(document.body).on("click","[data-gallery]",function(d){var e=a(this).data("gallery"),h=a(e),g=h.length&&h||a(b.prototype.options.container),c=a.extend(g.data(),{container:g[0],index:this,event:d,onopen:function(){g.data("gallery",this).trigger("open",arguments)},onslide:function(){g.trigger("slide",arguments)},onslideend:function(){g.trigger("slideend",arguments)},onslidecomplete:function(){g.trigger("slidecomplete",arguments)},onclose:function(){g.trigger("close").removeData("gallery")}}),f=a('[data-gallery="'+e+'"]');return c.filter&&(f=f.filter(c.filter)),new b(f,c)})});!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(window.jQuery)}(function(d){var c=0;d.ajaxTransport("iframe",function(h){if(h.async){var g,b,a;return{send:function(f,e){g=d('<form style="display:none;"></form>'),g.attr("accept-charset",h.formAcceptCharset),a=/\?/.test(h.url)?"&":"?","DELETE"===h.type?(h.url=h.url+a+"_method=DELETE",h.type="POST"):"PUT"===h.type?(h.url=h.url+a+"_method=PUT",h.type="POST"):"PATCH"===h.type&&(h.url=h.url+a+"_method=PATCH",h.type="POST"),c+=1,b=d('<iframe src="javascript:false;" name="iframe-transport-'+c+'"></iframe>').bind("load",function(){var i,j=d.isArray(h.paramName)?h.paramName:[h.paramName];b.unbind("load").bind("load",function(){var k;try{if(k=b.contents(),!k.length||!k[0].firstChild){throw new Error}}catch(l){k=void 0}e(200,"success",{iframe:k}),d('<iframe src="javascript:false;"></iframe>').appendTo(g),window.setTimeout(function(){g.remove()},0)}),g.prop("target",b.prop("name")).prop("action",h.url).prop("method",h.type),h.formData&&d.each(h.formData,function(k,l){d('<input type="hidden"/>').prop("name",l.name).val(l.value).appendTo(g)}),h.fileInput&&h.fileInput.length&&"POST"===h.type&&(i=h.fileInput.clone(),h.fileInput.after(function(k){return i[k]}),h.paramName&&h.fileInput.each(function(k){d(this).prop("name",j[k]||h.paramName)}),g.append(h.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),g.submit(),i&&i.length&&h.fileInput.each(function(m,l){var k=d(i[m]);d(l).prop("name",k.prop("name")),k.replaceWith(l)})}),g.append(b).appendTo(document.body)},abort:function(){b&&b.unbind("load").prop("src","javascript".concat(":false;")),g&&g.remove()}}}}),d.ajaxSetup({converters:{"iframe text":function(a){return a&&d(a[0].body).text()},"iframe json":function(a){return a&&d.parseJSON(d(a[0].body).text())},"iframe html":function(a){return a&&d(a[0].body).html()},"iframe xml":function(a){var e=a&&a[0];return e&&d.isXMLDoc(e)?e:d.parseXML(e.XMLDocument&&e.XMLDocument.xml||d(e.body).html())},"iframe script":function(a){return a&&d.globalEval(d(a[0].body).text())}}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],b):b(window.jQuery)}(function(b){b.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||b('<input type="file">').prop("disabled")),b.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),b.support.xhrFormDataFileUpload=!!window.FormData,b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:b(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(a,d){return a=this.messages[a]||a.toString(),d&&b.each(d,function(e,f){a=a.replace("{"+e+"}",f)}),a},formData:function(c){return c.serializeArray()},add:function(a,d){(d.autoUpload||d.autoUpload!==!1&&b(this).fileupload("option","autoUpload"))&&d.process().done(function(){d.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){var c=this.slice||this.webkitSlice||this.mozSlice;return c.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(f,e,h){var g=f-this.timestamp;return(!this.bitrate||!h||g>h)&&(this.bitrate=8*(e-this.loaded)*(1000/g),this.loaded=e,this.timestamp=f),this.bitrate}},_isXHRUpload:function(a){return !a.forceIframeTransport&&(!a.multipart&&b.support.xhrFileUpload||b.support.xhrFormDataFileUpload)},_getFormData:function(a){var d;return"function"==typeof a.formData?a.formData(a.form):b.isArray(a.formData)?a.formData:"object"===b.type(a.formData)?(d=[],b.each(a.formData,function(e,c){d.push({name:e,value:c})}),d):[]},_getTotal:function(a){var d=0;return b.each(a,function(e,c){d+=c.size||1}),d},_initProgressObject:function(a){var d={loaded:0,total:0,bitrate:0};a._progress?b.extend(a._progress,d):a._progress=d},_initResponseObject:function(d){var c;if(d._response){for(c in d._response){d._response.hasOwnProperty(c)&&delete d._response[c]}}else{d._response={}}},_onProgress:function(f,e){if(f.lengthComputable){var g,h=Date.now?Date.now():(new Date).getTime();if(e._time&&e.progressInterval&&h-e._time<e.progressInterval&&f.loaded!==f.total){return}e._time=h,g=Math.floor(f.loaded/f.total*(e.chunkSize||e._progress.total))+(e.uploadedBytes||0),this._progress.loaded+=g-e._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(h,this._progress.loaded,e.bitrateInterval),e._progress.loaded=e.loaded=g,e._progress.bitrate=e.bitrate=e._bitrateTimer.getBitrate(h,g,e.bitrateInterval),this._trigger("progress",f,e),this._trigger("progressall",f,this._progress)}},_initProgressListener:function(a){var f=this,e=a.xhr?a.xhr():b.ajaxSettings.xhr();e.upload&&(b(e.upload).bind("progress",function(c){var g=c.originalEvent;c.lengthComputable=g.lengthComputable,c.loaded=g.loaded,c.total=g.total,f._onProgress(c,a)}),a.xhr=function(){return e})},_isInstanceOf:function(d,c){return Object.prototype.toString.call(c)==="[object "+d+"]"},_initXHRData:function(a){var k,l=this,j=a.files[0],i=a.multipart||!b.support.xhrFileUpload,h=a.paramName[0];a.headers=a.headers||{},a.contentRange&&(a.headers["Content-Range"]=a.contentRange),i&&!a.blob&&this._isInstanceOf("File",j)||(a.headers["Content-Disposition"]='attachment; filename="'+encodeURI(j.name)+'"'),i?b.support.xhrFormDataFileUpload&&(a.postMessage?(k=this._getFormData(a),a.blob?k.push({name:h,value:a.blob}):b.each(a.files,function(d,e){k.push({name:a.paramName[d]||h,value:e})})):(l._isInstanceOf("FormData",a.formData)?k=a.formData:(k=new FormData,b.each(this._getFormData(a),function(d,c){k.append(c.name,c.value)})),a.blob?k.append(h,a.blob,j.name):b.each(a.files,function(c,d){(l._isInstanceOf("File",d)||l._isInstanceOf("Blob",d))&&k.append(a.paramName[c]||h,d,d.name)})),a.data=k):(a.contentType=j.type,a.data=a.blob||j),a.blob=null},_initIframeSettings:function(a){var d=b("<a></a>").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||""),a.formData=this._getFormData(a),a.redirect&&d&&d!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(c){this._isXHRUpload(c)?(this._chunkedUpload(c,!0)||(c.data||this._initXHRData(c),this._initProgressListener(c)),c.postMessage&&(c.dataType="postmessage "+(c.dataType||""))):this._initIframeSettings(c)},_getParamName:function(a){var f=b(a.fileInput),e=a.paramName;return e?b.isArray(e)||(e=[e]):(e=[],f.each(function(){for(var d=b(this),h=d.prop("name")||"files[]",g=(d.prop("files")||[1]).length;g;){e.push(h),g-=1}}),e.length||(e=[f.prop("name")||"files[]"])),e},_initFormSettings:function(a){a.form&&a.form.length||(a.form=b(a.fileInput.prop("form")),a.form.length||(a.form=b(this.options.fileInput.prop("form")))),a.paramName=this._getParamName(a),a.url||(a.url=a.form.prop("action")||location.href),a.type=(a.type||a.form.prop("method")||"").toUpperCase(),"POST"!==a.type&&"PUT"!==a.type&&"PATCH"!==a.type&&(a.type="POST"),a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){var d=b.extend({},this.options,a);return this._initFormSettings(d),this._initDataSettings(d),d},_getDeferredState:function(c){return c.state?c.state():c.isResolved()?"resolved":c.isRejected()?"rejected":"pending"},_enhancePromise:function(c){return c.success=c.done,c.error=c.fail,c.complete=c.always,c},_getXHRPromise:function(a,j,i){var h=b.Deferred(),g=h.promise();return j=j||this.options.context||g,a===!0?h.resolveWith(j,i):a===!1&&h.rejectWith(j,i),g.abort=h.promise,this._enhancePromise(g)},_addConvenienceMethods:function(a,h){var g=this,f=function(c){return b.Deferred().resolveWith(g,[c]).promise()};h.process=function(d,c){return(d||c)&&(h._processQueue=this._processQueue=(this._processQueue||f(this)).pipe(d,c)),this._processQueue||f(this)},h.submit=function(){return"pending"!==this.state()&&(h.jqXHR=this.jqXHR=g._trigger("submit",a,this)!==!1&&g._onSend(a,this)),this.jqXHR||g._getXHRPromise()},h.abort=function(){return this.jqXHR?this.jqXHR.abort():g._getXHRPromise()},h.state=function(){return this.jqXHR?g._getDeferredState(this.jqXHR):this._processQueue?g._getDeferredState(this._processQueue):void 0},h.progress=function(){return this._progress},h.response=function(){return this._response}},_getUploadedBytes:function(f){var e=f.getResponseHeader("Range"),h=e&&e.split("-"),g=h&&h.length>1&&parseInt(h[1],10);return g&&g+1},_chunkedUpload:function(x,w){x.uploadedBytes=x.uploadedBytes||0;var n,a,v=this,u=x.files[0],t=u.size,s=x.uploadedBytes,r=x.maxChunkSize||t,q=this._blobSlice,p=b.Deferred(),o=p.promise();return this._isXHRUpload(x)&&q&&(s||t>r)&&!x.data?w?!0:s>=t?(u.error=x.i18n("uploadedBytes"),this._getXHRPromise(!1,x.context,[null,"error",u.error])):(a=function(){var e=b.extend({},x),d=e._progress.loaded;e.blob=q.call(u,s,s+r,u.type),e.chunkSize=e.blob.size,e.contentRange="bytes "+s+"-"+(s+e.chunkSize-1)+"/"+t,v._initXHRData(e),v._initProgressListener(e),n=(v._trigger("chunksend",null,e)!==!1&&b.ajax(e)||v._getXHRPromise(!1,e.context)).done(function(g,f,c){s=v._getUploadedBytes(c)||s+e.chunkSize,d+e.chunkSize-e._progress.loaded&&v._onProgress(b.Event("progress",{lengthComputable:!0,loaded:s-e.uploadedBytes,total:s-e.uploadedBytes}),e),x.uploadedBytes=e.uploadedBytes=s,e.result=g,e.textStatus=f,e.jqXHR=c,v._trigger("chunkdone",null,e),v._trigger("chunkalways",null,e),t>s?a():p.resolveWith(e.context,[g,f,c])}).fail(function(f,c,g){e.jqXHR=f,e.textStatus=c,e.errorThrown=g,v._trigger("chunkfail",null,e),v._trigger("chunkalways",null,e),p.rejectWith(e.context,[f,c,g])})},this._enhancePromise(o),o.abort=function(){return n.abort()},a(),o):!1},_beforeSend:function(d,c){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(c),this._initProgressObject(c),c._progress.loaded=c.loaded=c.uploadedBytes||0,c._progress.total=c.total=this._getTotal(c.files)||1,c._progress.bitrate=c.bitrate=0,this._active+=1,this._progress.loaded+=c.loaded,this._progress.total+=c.total},_onDone:function(a,l,k,j){var i=j._progress.total,h=j._response;j._progress.loaded<i&&this._onProgress(b.Event("progress",{lengthComputable:!0,loaded:i,total:i}),j),h.result=j.result=a,h.textStatus=j.textStatus=l,h.jqXHR=j.jqXHR=k,this._trigger("done",null,j)},_onFail:function(g,f,j,i){var h=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),h.jqXHR=i.jqXHR=g,h.textStatus=i.textStatus=f,h.errorThrown=i.errorThrown=j,this._trigger("fail",null,i)},_onAlways:function(f,e,h,g){this._trigger("always",null,g)},_onSend:function(r,q){q.submit||this._addConvenienceMethods(r,q);var o,n,m,l,p=this,k=p._getAJAXSettings(q),a=function(){return p._sending+=1,k._bitrateTimer=new p._BitrateTimer,o=o||((n||p._trigger("send",r,k)===!1)&&p._getXHRPromise(!1,k.context,n)||p._chunkedUpload(k)||b.ajax(k)).done(function(e,d,f){p._onDone(e,d,f,k)}).fail(function(e,d,f){p._onFail(e,d,f,k)}).always(function(f,d,h){if(p._onAlways(f,d,h,k),p._sending-=1,p._active-=1,k.limitConcurrentUploads&&k.limitConcurrentUploads>p._sending){for(var g=p._slots.shift();g;){if("pending"===p._getDeferredState(g)){g.resolve();break}g=p._slots.shift()}}0===p._active&&p._trigger("stop")})};return this._beforeSend(r,k),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(m=b.Deferred(),this._slots.push(m),l=m.pipe(a)):(this._sequence=this._sequence.pipe(a,a),l=this._sequence),l.abort=function(){return n=[void 0,"abort","abort"],o?o.abort():(m&&m.rejectWith(k.context,n),a())},this._enhancePromise(l)):a()},_onAdd:function(v,u){var o,n,m,a,t=this,s=!0,r=b.extend({},this.options,u),q=r.limitMultiFileUploads,p=this._getParamName(r);if((r.singleFileUploads||q)&&this._isXHRUpload(r)){if(!r.singleFileUploads&&q){for(m=[],o=[],a=0;a<u.files.length;a+=q){m.push(u.files.slice(a,a+q)),n=p.slice(a,a+q),n.length||(n=p),o.push(n)}}else{o=p}}else{m=[u.files],o=[p]}return u.originalFiles=u.files,b.each(m||u.files,function(e,d){var c=b.extend({},u);return c.files=m?d:[d],c.paramName=o[e],t._initResponseObject(c),t._initProgressObject(c),t._addConvenienceMethods(v,c),s=t._trigger("add",v,c)}),s},_replaceFileInput:function(a){var d=a.clone(!0);b("<form></form>").append(d)[0].reset(),a.after(d).detach(),b.cleanData(a.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(c,e){return e===a[0]?d[0]:e}),a[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(a,l){var h,k=this,j=b.Deferred(),i=function(c){c&&!c.entry&&(c.entry=a),j.resolve([c])};return l=l||"",a.isFile?a._file?(a._file.relativePath=l,j.resolve(a._file)):a.file(function(c){c.relativePath=l,j.resolve(c)},i):a.isDirectory?(h=a.createReader(),h.readEntries(function(c){k._handleFileTreeEntries(c,l+a.name+"/").done(function(d){j.resolve(d)}).fail(i)},i)):j.resolve([]),j.promise()},_handleFileTreeEntries:function(a,f){var e=this;return b.when.apply(b,b.map(a,function(c){return e._handleFileTreeEntry(c,f)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=a||{};var d=a.items;return d&&d.length&&(d[0].webkitGetAsEntry||d[0].getAsEntry)?this._handleFileTreeEntries(b.map(d,function(e){var c;return e.webkitGetAsEntry?(c=e.webkitGetAsEntry(),c&&(c._file=e.getAsFile()),c):e.getAsEntry()})):b.Deferred().resolve(b.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=b(a);var g,f,h=a.prop("webkitEntries")||a.prop("entries");if(h&&h.length){return this._handleFileTreeEntries(h)}if(g=b.makeArray(a.prop("files")),g.length){void 0===g[0].name&&g[0].fileName&&b.each(g,function(d,c){c.name=c.fileName,c.size=c.fileSize})}else{if(f=a.prop("value"),!f){return b.Deferred().resolve([]).promise()}g=[{name:f.replace(/^.*\\/,"")}]}return b.Deferred().resolve(g).promise()},_getFileInputFiles:function(a){return a instanceof b&&1!==a.length?b.when.apply(b,b.map(a,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var f=this,e={fileInput:b(a.target),form:b(a.target.form)};this._getFileInputFiles(e.fileInput).always(function(c){e.files=c,f.options.replaceFileInput&&f._replaceFileInput(e.fileInput),f._trigger("change",a,e)!==!1&&f._onAdd(a,e)})},_onPaste:function(a){var f=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,e={files:[]};return f&&f.length&&(b.each(f,function(g,d){var h=d.getAsFile&&d.getAsFile();h&&e.files.push(h)}),this._trigger("paste",a,e)===!1||this._onAdd(a,e)===!1)?!1:void 0},_onDrop:function(f){f.dataTransfer=f.originalEvent&&f.originalEvent.dataTransfer;var e=this,h=f.dataTransfer,g={};h&&h.files&&h.files.length&&(f.preventDefault(),this._getDroppedFiles(h).always(function(a){g.files=a,e._trigger("drop",f,g)!==!1&&e._onAdd(f,g)}))},_onDragOver:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var d=a.dataTransfer;if(d){if(this._trigger("dragover",a)===!1){return !1}-1!==b.inArray("Files",d.types)&&(d.dropEffect="copy",a.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),b.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(a,f){var e=-1!==b.inArray(a,this._specialOptions);e&&this._destroyEventHandlers(),this._super(a,f),e&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):a.fileInput instanceof b||(a.fileInput=b(a.fileInput)),a.dropZone instanceof b||(a.dropZone=b(a.dropZone)),a.pasteZone instanceof b||(a.pasteZone=b(a.pasteZone))},_getRegExp:function(e){var d=e.split("/"),f=d.pop();return d.shift(),new RegExp(d.join("/"),f)},_isRegExpOption:function(a,d){return"url"!==a&&"string"===b.type(d)&&/^\/.*\/[igm]{0,3}$/.test(d)},_initDataAttributes:function(){var a=this,d=this.options;b.each(b(this.element[0].cloneNode(!1)).data(),function(c,e){a._isRegExpOption(c,e)&&(e=a._getRegExp(e)),d[c]=e})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var d=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(c){a.files=c,d._onAdd(null,a)}):(a.files=b.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var i,h,l=this,k=b.Deferred(),j=k.promise();return j.abort=function(){return h=!0,i?i.abort():(k.reject(null,"abort","abort"),j)},this._getFileInputFiles(a.fileInput).always(function(c){if(!h){if(!c.length){return k.reject(),void 0}a.files=c,i=l._onSend(null,a).then(function(e,d,f){k.resolve(e,d,f)},function(e,d,f){k.reject(e,d,f)})}}),this._enhancePromise(j)}if(a.files=b.makeArray(a.files),a.files.length){return this._onSend(null,a)}}return this._getXHRPromise(!1,a&&a.context)}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],b):b(window.jQuery)}(function(d){var c=d.blueimp.fileupload.prototype.options.add;d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{processQueue:[],add:function(f,b){var a=d(this);b.process(function(){return a.fileupload("process",b)}),c.call(this,f,b)}},processActions:{},_processFile:function(a){var h=this,g=d.Deferred().resolveWith(h,[a]),f=g.promise();return this._trigger("process",null,a),d.each(a.processQueue,function(i,e){var j=function(b){return h.processActions[e.action].call(h,b,e)};f=f.pipe(j,e.always&&j)}),f.done(function(){h._trigger("processdone",null,a),h._trigger("processalways",null,a)}).fail(function(){h._trigger("processfail",null,a),h._trigger("processalways",null,a)}),f},_transformProcessQueue:function(a){var e=[];d.each(a.processQueue,function(){var h={},g=this.action,b=this.prefix===!0?g:this.prefix;d.each(this,function(i,f){h[i]="string"===d.type(f)&&"@"===f.charAt(0)?a[f.slice(1)||(b?b+i.charAt(0).toUpperCase()+i.slice(1):i)]:f}),e.push(h)}),a.processQueue=e},processing:function(){return this._processing},process:function(a){var f=this,e=d.extend({},this.options,a);return e.processQueue&&e.processQueue.length&&(this._transformProcessQueue(e),0===this._processing&&this._trigger("processstart"),d.each(a.files,function(g){var i=g?d.extend({},e):e,h=function(){return f._processFile(i)};i.index=g,f._processing+=1,f._processingQueue=f._processingQueue.pipe(h,h).always(function(){f._processing-=1,0===f._processing&&f._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=d.Deferred().resolveWith(this).promise()}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],b):b(window.jQuery,window.loadImage)}(function(d,c){d.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",disabled:"@disableImageResize"},{action:"saveImage",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"}),d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:10000000,imageMaxWidth:1920,imageMaxHeight:1080,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(j,i){if(i.disabled){return j}var h=this,b=j.files[j.index],a=d.Deferred();return"number"===d.type(i.maxFileSize)&&b.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(b.type)||!c(b,function(e){e.src&&(j.img=e),a.resolveWith(h,[j])},i)?j:a.promise()},resizeImage:function(p,o){if(o.disabled){return p}var k,b,a,n=this,m=d.Deferred(),l=function(e){p[e.getContext?"canvas":"img"]=e,m.resolveWith(n,[p])};return o=d.extend({canvas:!0},o),p.exif&&(o.orientation===!0&&(o.orientation=p.exif.get("Orientation")),o.thumbnail&&(k=p.exif.get("Thumbnail")))?(c(k,l,o),m.promise()):(b=o.canvas&&p.canvas||p.img,b&&(a=c.scale(b,o),a.width!==b.width||a.height!==b.height)?(l(a),m.promise()):p)},saveImage:function(a,n){if(!a.canvas||n.disabled){return a}var m=this,l=a.files[a.index],k=l.name,j=d.Deferred(),i=function(b){b.name||(l.type===b.type?b.name=l.name:l.name&&(b.name=l.name.replace(/\..+$/,"."+b.type.substr(6)))),a.files[a.index]=b,j.resolveWith(m,[a])};if(a.canvas.mozGetAsFile){i(a.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(l.type)&&k||(k&&k.replace(/\..+$/,"")||"blob")+".png",l.type))}else{if(!a.canvas.toBlob){return a}a.canvas.toBlob(i,l.type)}return j.promise()},loadImageMetaData:function(h,g){if(g.disabled){return h}var b=this,a=d.Deferred();return c.parseMetaData(h.files[h.index],function(e){d.extend(h,e),a.resolveWith(b,[h])},g),a.promise()},saveImageMetaData:function(f,e){if(!(f.imageHead&&f.canvas&&f.canvas.toBlob)||e.disabled){return f}var h=f.files[f.index],g=new Blob([f.imageHead,this._blobSlice.call(h,20)],{type:h.type});return g.name=h.name,f.files[f.index]=g,f},setImage:function(f,e){var g=f.canvas||f.img;return g&&!e.disabled&&(f.files[f.index][e.name||"preview"]=g),f}}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],b):b(window.jQuery,window.loadImage)}(function(d,c){d.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(j,i){if(i.disabled){return j}var b,a,h=j.files[j.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(h.type)&&("number"!==d.type(i.maxFileSize)||h.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(h.type))&&(b=c.createObjectURL(h))?(a=this._audioElement.cloneNode(!1),a.src=b,a.controls=!0,j.audio=a,j):j},setAudio:function(f,e){return f.audio&&!e.disabled&&(f.files[f.index][e.name||"preview"]=f.audio),f}}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],b):b(window.jQuery,window.loadImage)}(function(d,c){d.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(j,i){if(i.disabled){return j}var b,a,h=j.files[j.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(h.type)&&("number"!==d.type(i.maxFileSize)||h.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(h.type))&&(b=c.createObjectURL(h))?(a=this._videoElement.cloneNode(!1),a.src=b,a.controls=!0,j.video=a,j):j},setVideo:function(f,e){return f.video&&!e.disabled&&(f.files[f.index][e.name||"preview"]=f.video),f}}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],b):b(window.jQuery)}(function(b){b.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{getNumberOfFiles:b.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(a,j){if(j.disabled){return a}var i=b.Deferred(),h=this.options,g=a.files[a.index];return"number"===b.type(j.maxNumberOfFiles)&&(h.getNumberOfFiles()||0)+a.files.length>j.maxNumberOfFiles?g.error=h.i18n("maxNumberOfFiles"):!j.acceptFileTypes||j.acceptFileTypes.test(g.type)||j.acceptFileTypes.test(g.name)?j.maxFileSize&&g.size>j.maxFileSize?g.error=h.i18n("maxFileSize"):"number"===b.type(g.size)&&g.size<j.minFileSize?g.error=h.i18n("minFileSize"):delete g.error:g.error=h.i18n("acceptFileTypes"),g.error||a.files.error?(a.files.error=!0,i.rejectWith(this,[a])):i.resolveWith(this,[a]),i.promise()}}})});!function(b){"function"==typeof define&&define.amd?define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],b):b(window.jQuery,window.tmpl)}(function(d,c){d.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().length},getFilesFromResponse:function(a){return a.result&&d.isArray(a.result.files)?a.result.files:[]},add:function(a,l){var k=d(this),j=k.data("blueimp-fileupload")||k.data("fileupload"),i=j.options,h=l.files;l.process(function(){return k.fileupload("process",l)}).always(function(){l.context=j._renderUpload(h).data("data",l),j._renderPreviews(l),i.filesContainer[i.prependFiles?"prepend":"append"](l.context),j._forceReflow(l.context),j._transition(l.context).done(function(){j._trigger("added",a,l)===!1||!i.autoUpload&&!l.autoUpload||l.autoUpload===!1||l.files.error||l.submit()})})},send:function(a,f){var e=d(this).data("blueimp-fileupload")||d(this).data("fileupload");return f.context&&f.dataType&&"iframe"===f.dataType.substr(0,6)&&f.context.find(".progress").addClass(!d.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),e._trigger("sent",a,f)},done:function(a,n){var j,i,m=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),l=n.getFilesFromResponse||m.options.getFilesFromResponse,k=l(n);n.context?n.context.each(function(f){var b=k[f]||{error:"Empty file upload result"};i=m._addFinishedDeferreds(),m._transition(d(this)).done(function(){var g=d(this);j=m._renderDownload([b]).replaceAll(g),m._forceReflow(j),m._transition(j).done(function(){n.context=d(this),m._trigger("completed",a,n),m._trigger("finished",a,n),i.resolve()})})}):(j=m._renderDownload(k)[m.options.prependFiles?"prependTo":"appendTo"](m.options.filesContainer),m._forceReflow(j),i=m._addFinishedDeferreds(),m._transition(j).done(function(){n.context=d(this),m._trigger("completed",a,n),m._trigger("finished",a,n),i.resolve()}))},fail:function(a,j){var h,g,i=d(this).data("blueimp-fileupload")||d(this).data("fileupload");j.context?j.context.each(function(e){if("abort"!==j.errorThrown){var b=j.files[e];b.error=b.error||j.errorThrown||!0,g=i._addFinishedDeferreds(),i._transition(d(this)).done(function(){var f=d(this);h=i._renderDownload([b]).replaceAll(f),i._forceReflow(h),i._transition(h).done(function(){j.context=d(this),i._trigger("failed",a,j),i._trigger("finished",a,j),g.resolve()})})}else{g=i._addFinishedDeferreds(),i._transition(d(this)).done(function(){d(this).remove(),i._trigger("failed",a,j),i._trigger("finished",a,j),g.resolve()})}}):"abort"!==j.errorThrown?(j.context=i._renderUpload(j.files)[i.options.prependFiles?"prependTo":"appendTo"](i.options.filesContainer).data("data",j),i._forceReflow(j.context),g=i._addFinishedDeferreds(),i._transition(j.context).done(function(){j.context=d(this),i._trigger("failed",a,j),i._trigger("finished",a,j),g.resolve()})):(i._trigger("failed",a,j),i._trigger("finished",a,j),i._addFinishedDeferreds().resolve())},progress:function(f,e){if(e.context){var g=Math.floor(100*(e.loaded/e.total));e.context.find(".progress").attr("aria-valuenow",g).children().first().css("width",g+"%")}},progressall:function(a,l){var k=d(this),j=Math.floor(100*(l.loaded/l.total)),i=k.find(".fileupload-progress"),h=i.find(".progress-extended");h.length&&h.html((k.data("blueimp-fileupload")||k.data("fileupload"))._renderExtendedProgress(l)),i.find(".progress").attr("aria-valuenow",j).children().first().css("width",j+"%")},start:function(a){var e=d(this).data("blueimp-fileupload")||d(this).data("fileupload");e._resetFinishedDeferreds(),e._transition(d(this).find(".fileupload-progress")).done(function(){e._trigger("started",a)})},stop:function(a){var f=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),e=f._addFinishedDeferreds();d.when.apply(d,f._getFinishedDeferreds()).done(function(){f._trigger("stopped",a)}),f._transition(d(this).find(".fileupload-progress")).done(function(){d(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),d(this).find(".progress-extended").html("&nbsp;"),e.resolve()})},processstart:function(){d(this).addClass("fileupload-processing")},processstop:function(){d(this).removeClass("fileupload-processing")},destroy:function(a,h){var g=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),f=function(){g._transition(h.context).done(function(){d(this).remove(),g._trigger("destroyed",a,h)})};h.url?d.ajax(h).done(f):f()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){return a||(a=d.Deferred()),this._finishedUploads.push(a),a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=d(this),h=a.prop("href"),g=a.prop("download"),f="application/octet-stream";a.bind("dragstart",function(i){try{i.originalEvent.dataTransfer.setData("DownloadURL",[f,g,h].join(":"))}catch(e){}})},_formatFileSize:function(b){return"number"!=typeof b?"":b>=1000000000?(b/1000000000).toFixed(2)+" GB":b>=1000000?(b/1000000).toFixed(2)+" MB":(b/1000).toFixed(2)+" KB"},_formatBitrate:function(b){return"number"!=typeof b?"":b>=1000000000?(b/1000000000).toFixed(2)+" Gbit/s":b>=1000000?(b/1000000).toFixed(2)+" Mbit/s":b>=1000?(b/1000).toFixed(2)+" kbit/s":b.toFixed(2)+" bit/s"},_formatTime:function(f){var e=new Date(1000*f),g=Math.floor(f/86400);return g=g?g+"d ":"",g+("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)},_formatPercentage:function(b){return(100*b).toFixed(2)+" %"},_renderExtendedProgress:function(b){return this._formatBitrate(b.bitrate)+" | "+this._formatTime(8*(b.total-b.loaded)/b.bitrate)+" | "+this._formatPercentage(b.loaded/b.total)+" | "+this._formatFileSize(b.loaded)+" / "+this._formatFileSize(b.total)},_renderTemplate:function(a,f){if(!a){return d()}var e=a({files:f,formatFileSize:this._formatFileSize,options:this.options});return e instanceof d?e:d(this.options.templatesContainer).html(e).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(e,b){d(b).append(a.files[e].preview)})},_renderUpload:function(b){return this._renderTemplate(this.options.uploadTemplate,b)},_renderDownload:function(b){return this._renderTemplate(this.options.downloadTemplate,b).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(a){a.preventDefault();var h=d(a.currentTarget),g=h.closest(".template-upload"),f=g.data("data");f&&f.submit&&!f.jqXHR&&f.submit()&&h.prop("disabled",!0)},_cancelHandler:function(a){a.preventDefault();var f=d(a.currentTarget).closest(".template-upload"),e=f.data("data")||{};e.jqXHR?e.jqXHR.abort():(e.errorThrown="abort",this._trigger("fail",a,e))},_deleteHandler:function(a){a.preventDefault();var e=d(a.currentTarget);this._trigger("destroy",a,d.extend({context:e.closest(".template-download"),type:"DELETE"},e.data()))},_forceReflow:function(a){return d.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var e=d.Deferred();return d.support.transition&&a.hasClass("fade")&&a.is(":visible")?a.bind(d.support.transition.end,function(b){b.target===a[0]&&(a.unbind(d.support.transition.end),e.resolveWith(a))}).toggleClass("in"):(a.toggleClass("in"),e.resolveWith(a)),e},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),e=this.options.filesContainer;this._on(a.find(".start"),{click:function(b){b.preventDefault(),e.find(".start").click()}}),this._on(a.find(".cancel"),{click:function(b){b.preventDefault(),e.find(".cancel").click()}}),this._on(a.find(".delete"),{click:function(b){b.preventDefault(),e.find(".toggle:checked").closest(".template-download").find(".delete").click(),a.find(".toggle").prop("checked",!1)}}),this._on(a.find(".toggle"),{change:function(f){e.find(".toggle").prop("checked",d(f.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var b=this.options;b.templatesContainer=this.document[0].createElement(b.filesContainer.prop("nodeName")),c&&(b.uploadTemplateId&&(b.uploadTemplate=c(b.uploadTemplateId)),b.downloadTemplateId&&(b.downloadTemplate=c(b.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?a.filesContainer=this.element.find(".files"):a.filesContainer instanceof d||(a.filesContainer=d(a.filesContainer))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates()},_create:function(){this._super(),this._resetFinishedDeferreds(),d.support.fileInput||this._disableFileInputButton()},enable:function(){var b=!1;this.options.disabled&&(b=!0),this._super(),b&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})});